{% load static %}
{%  static "images" as baseUrl %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="{%static '../static/css/index.css' %}">
    <title>StudyBuddy</title>
    <style>
        .profile_body{
            background-color: #5f43b2;
        }
        .profile-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; 
            flex: 2; /* Adjust the flex value as needed */
            padding: 10px;
            margin-right: 5%;
          }

          
          /* Style for each profile card */
          .profile-card {
            border: 1px solid #ddd;
            padding: 20px;
           
            background:  rgb(68, 53, 99);
            color: #ddd;
            box-shadow: 0 15px 25px rgba(31, 35, 44, 0.6);
            border-radius: 10px;
          }
          .myInput {
            background-image: url('/css/searchicon.png');
            background-position: 10px 10px;
            background-repeat: no-repeat;
            width: 30%;
            font-size: 16px;
            padding: 12px 20px 12px 40px;
            border: 1px solid #ddd;
            margin-bottom: 12px;
            margin-left: 50%;
            margin-right: 15%;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2); ;
          }
          .check_filter{
            margin-top: 0%;
            flex: 1; /* Adjust the flex value as needed */
            padding: 10px;
            color: #5f43b2;
            font-weight: bold;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
          }
          .profile_container{
            display: flex;
          }
          .profile_logout{
            margin-right: 5%;
          }
          

          .gotochat_button {
            all: unset;
            display: flex;
            margin-top: 20%;
            height: 10%;
            align-items: center;
            position: relative;
            padding: 0.6em 2em;
            border: rgb(68, 53, 99) solid 0.15em;
            border-radius: 0.25em;
            color: rgb(68, 53, 99);
            font-size: 1.5em;
            font-weight: 600;
            cursor: pointer;
            overflow: hidden;
            transition: border 300ms, color 300ms;
            user-select: none;
          }
          
          .gotochat_button p {
            z-index: 1;
          }
          
          .gotochat_button:hover {
            color: #212121;
          }
          
          .gotochat_button:active {
            border-color: rgb(68, 53, 99);
          }
          
          .gotochat_button::after, .gotochat_button::before {
            content: "";
            position: absolute;
            width:9em;
            aspect-ratio: 1;
            background: rgb(68, 53, 99);
            opacity: 50%;
            border-radius: 50%;
            transition: transform 500ms, background 300ms;
          }
          
          .gotochat_button::before {
            left: 0;
            transform: translateX(-8em);
          }
          
          .gotochat_button::after {
            right: 0;
            transform: translateX(8em);
          }
          
          .gotochat_button:hover:before {
            transform: translateX(-1em);
          }
          
          .gotochat_button:hover:after {
            transform: translateX(1em);
          }
          
          .gotochat_button:active:before,
          .gotochat_button:active:after {
            background: rgb(68, 53, 99);
          }
          .logo{
            color:  rgb(59, 9, 116);
            font-weight: bold;
            font-family: candara;
            font-size: xx-large;
          }
    </style>
</head>
<body  class="profile_body">
    <nobr>
    <a  class="navbar-brand logo" href="/">StudyBuddy</a>   
    <input type="text" class="myInput"  placeholder="Search for modules.." title="Type in a name">
    </nobr>
    <div class="profile_container">
        <div class="check_filter">
            <input type="checkbox" class="filterCheckbox" id="python" name="python" value="python">
            <label for="python"> Python</label><br>
            <input type="checkbox" class="filterCheckbox" id="java" name="java" value="java">
            <label for="java"> Java</label><br>
            <input type="checkbox" class="filterCheckbox" id="deign" name="deign" value="Html">
            <label for="deign">HTML/CSS/JS</label><br>
            <input type="checkbox" class="filterCheckbox" id="React" name="React" value="React">
            <label for="react"> React</label><br>
            <input type="checkbox" class="filterCheckbox" id="CN" name="CN" value="CN">
            <label for="computernetworks"> Computer Networks</label><br>
            <input type="checkbox" class="filterCheckbox" id="database" name="database" value="database">
            <label for="database"> Database</label><br>
            <input type="checkbox" class="filterCheckbox" id="C++" name="C++" value="C++">
            <label for="C++"> C++</label><br>
            <button class="">
                <p>Go to Chat Room</p>
            </button>
        </div>
        <div class="profile-grid">
          {% for user_profile in user_profiles %}
          <div class="profile-card" data-subjects="{{ user_profile.module }},{{ user_profile.module2 }}">
              <h2>{{ user_profile.user.username }}</h2>
              <p>Can Guide: {{ user_profile.module }}</p>
              <p>Also specialized in: {{ user_profile.module2 }}</p>
              <a href="#">Connect</a>
          </div>
          {% endfor %}
        </div>
    </div>
    
    <script>
      document.addEventListener("DOMContentLoaded", function() {
          const checkboxes = document.querySelectorAll(".filterCheckbox");
          const profileCards = document.querySelectorAll(".profile-card");
      
          checkboxes.forEach(checkbox => {
              checkbox.addEventListener("change", function() {
                  const selectedSubjects = Array.from(checkboxes)
                      .filter(checkbox => checkbox.checked)
                      .map(checkbox => checkbox.value);
      
                  profileCards.forEach(card => {
                      const subjects = card.getAttribute("data-subjects").split(",");
                      const isFiltered = selectedSubjects.some(subject => subjects.includes(subject));
      
                      if (isFiltered) {
                          card.style.display = "block";
                      } else {
                          card.style.display = "none";
                      }
                  });
              });
          });
      });
      </script>
      
</html>